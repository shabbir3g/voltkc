var tag=document.createElement('script');tag.src="//www.youtube.com/player_api";var firstScriptTag=document.getElementsByTagName('script')[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var players={};(function tapLandScapeMenu(){var menuItems=$('.tpp-nav > li > a');function tapMenu(mql){if(mql.matches){menuItems.on('click',function(e){var _self=$(this);e.preventDefault();menuItems.not(this).removeClass('clicked');if(!_self.hasClass('clicked')){_self.addClass('clicked');}else{window.location.replace(_self.attr('href'));}});}else{menuItems.off();}}
var mql=window.matchMedia("screen and (max-width: 1025px)");mql.addListener(tapMenu);tapMenu(mql);})();var topPad;(function checkSublevelMenu(){var
bottomMenu=$('.s--top-page-panel .tpp-nav'),sublevel=$('.s--top-page-panel .tpp-nav>li.active .sublevel'),main=$('#main'),body=$('body');body.addClass('load');if(!sublevel.length&&bottomMenu.length){main.addClass('has-no-sub');topPad=35;}
else{if($('#home-slider-wrapper')[0]){topPad=0;}
else{topPad=75;}}
if(!sublevel.length&&!bottomMenu.length){main.addClass('not-menu-page');}})();function onYouTubePlayerAPIReady(){$(document).ready(function(){$('iframe.ytplayer').each(function(event){var iframeID=$(this).attr('id');players[iframeID]=new YT.Player(iframeID);});});}
var afterExpanded=function(object){if(object.closest('.jq-brand-items').length>0){var visibleTab=$('.brand-pager:visible'),activeThmb=visibleTab.find('.active'),thmbWidth=activeThmb.width();if($(".ec-gallery").hasClass('brand-gallery')){$('.brand-pager-holder .current-tab').css({width:thmbWidth,left:thmbWidth*visibleTab.find('a').index(activeThmb)});}}};var exGlobalTimerSlider;var exCnt=1;var exTimer=2500;var exLoopSlider=function(timer){var links=$('.expanded-mode .js-slide-thumbnails a'),linksFull=$('.expanded-block .js-slide-thumbnails a'),images=$('.expanded-mode .js-slide-image img'),imagesFull=$('.expanded-block .js-slide-image img');exGlobalTimerSlider=setInterval(function(){links.removeClass('active');images.removeClass('active-slide-img past-slide');linksFull.removeClass('active');imagesFull.removeClass('active-slide-img past-slide');links.eq(exCnt).addClass('active');images.eq(exCnt).addClass('active-slide-img');linksFull.eq(exCnt).addClass('active');imagesFull.eq(exCnt).addClass('active-slide-img');if(links.length){if($(".ec-gallery").hasClass('brand-gallery')){$('.brand-pager-holder .current-tab').css({left:links.eq(1).width()*exCnt});}
if(exCnt==links.length- 1){exCnt=0;}else{exCnt++;}}
if(linksFull.length){if($(".ec-gallery").hasClass('brand-gallery')){$('.brand-pager-holder .current-tab').css({left:linksFull.eq(1).width()*exCnt});}
if(exCnt==linksFull.length- 1){exCnt=0;}else{exCnt++;}}},timer);};var clearloopSlider=function(){clearInterval(exGlobalTimerSlider);};var addFirstSlideActive=function(){var imgGrid=$('.expanded-mode .js-slide-image img').eq(0),imgFull=$('.expanded-block .js-slide-image img').eq(0);var toggleClassFunc=function(img){setTimeout(function(){img.removeClass('first-load').addClass('active-slide-img');},1000);setTimeout(function(){img.addClass('ac');},1200);};if(imgGrid.length){toggleClassFunc(imgGrid);}
if(imgFull.length){toggleClassFunc(imgFull);}};function stopYouTubeVideo(iframeID){if(typeof players[iframeID].stopVideo==='function'){players[iframeID].seekTo(0);players[iframeID].stopVideo();}}
var BFMjs=function(){"use strict";var
isMobile=function(){var mobile;return(function(a){mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4));return mobile;}(navigator.userAgent||navigator.vendor||window.opera));},init=function(){var
bodyObj=$('body'),menuObj=$('#menu'),headerObj=$('.header'),win$=$(window),animateHeaderFrom=10;function animateHeader(){var scrollTopPos=win$.scrollTop();function checkWinScrollPosition(){if(scrollTopPos>animateHeaderFrom){if(!headerObj.hasClass('h-animated')){headerObj.addClass('h-animated');bodyObj.addClass('b-animated');}}else{if(headerObj.hasClass('h-animated')){headerObj.removeClass('h-animated');bodyObj.removeClass('b-animated');}}}
jQuery(window).on('scroll',function(){scrollTopPos=$(this).scrollTop();checkWinScrollPosition();});checkWinScrollPosition();}
function bodyDesktopClass(){if(!isMobile()){bodyObj.addClass('desktop-mode');}}
function bodyMobileClass(){if(isMobile()){bodyObj.addClass('mobile-mode');}}
function mobileMenu(){if(menuObj.length){menuObj.mmenu();menuObj.find('.mob-menus > ul > li > .jq-has-drop').on('click',function(e){e.preventDefault();$('.mob-menus > ul > li').removeClass('drop-open');$(this).parent().addClass('drop-open');});menuObj.find('.mob-menus > ul > li > .sub .jq-has-drop').on('click',function(e){e.preventDefault();$('.mob-menus > ul > li > ul >li').removeClass('drop-open');$(this).parent().addClass('drop-open');});}}
function headerSearch(){if(headerObj.length){headerObj.on("click",".ht-simplemenu .jq-open-search",function(e){e.preventDefault();$('.header').toggleClass('search-active');});}}
jQuery(document).ready(function(){animateHeader();bodyDesktopClass();bodyMobileClass();mobileMenu();headerSearch();});},il={loader:'<div class="img-loader"></div>',loaderTmp:false,imgL:0,imgLsl:0,imgLFeat:0,imgC:0,imgF:true,loadedCall:false,render:function(el,clone_el,callback){var that=this,imgs=$('[data-src]',el),page_type=[];if(callback){this.loadedCall=callback;}
if(!imgs.length){return;}
if(el.is('.fwbi-content, .js-es-content')){page_type=['.js-main-image','.js-thumbnails','.js-slide-image','.js-slide-thumbnails','.js-feat-image','.js-feat-thumbnails'];}else if(el.is('.baac-hidden-row')){page_type=['.baac-slider-frame','.baac-slider-tn'];}
this.imgF=true;this.imgC=0;this.images=$(page_type[0]+' [data-src]',clone_el||el);this.thumbs=$(page_type[1]+' [data-src]',clone_el||el);this.imagesSl=$(page_type[2]+' [data-src]',clone_el||el);this.thumbsSl=$(page_type[3]+' [data-src]',clone_el||el);this.imagesFeat=$(page_type[4]+' [data-src]',clone_el||el);this.thumbsFeat=$(page_type[5]+' [data-src]',clone_el||el);this.imgL=this.images.length;this.imgLsl=this.imagesSl.length;this.imgLFeat=this.imagesFeat.length;this.loaderTmp=false;this.images.each(function(){that.eachClone($(this));});this.thumbs.each(function(){that.eachClone($(this),true);});this.imagesSl.each(function(){that.eachClone($(this));});this.thumbsSl.each(function(){that.eachClone($(this),true);});this.imagesFeat.each(function(){that.eachClone($(this));});this.thumbsFeat.each(function(){that.eachClone($(this),true);});if(clone_el){imgs.each(function(){that.eachImg($(this));});}},eachClone:function(_self,is_thumb){var my_src=_self.attr('data-src'),that=this,thumb_l;if(is_thumb){thumb_l=$(this.loader).insertBefore(_self);thumb_l.parent().addClass('load-start');}else{if(this.imgF){this.imgF=false;this.loaderTmp=$(this.loader).insertBefore(_self);this.loaderTmp.parent().addClass('load-start');}}
_self.attr('src',my_src).removeAttr('data-src').on('load',function(){var _self=$(this);if(is_thumb){that.removeLoader(thumb_l);_self.parent().removeClass('load-start');}else{that.imgC+=1;if(_self.is(that.loaderTmp.next())){that.loaderTmp.parent().addClass('first-loaded');that.loaderTmp.closest('.load-start').removeClass('load-start');}
if(that.imgC===that.imgL){that.removeLoader(that.loaderTmp);that.loaderTmp=false;}
if(that.imgC===that.imgLsl){that.removeLoader(that.loaderTmp);that.loaderTmp=false;}
if(that.imgC===that.imgLFeat){that.removeLoader(that.loaderTmp);that.loaderTmp=false;if(that.loadedCall){that.loadedCall();}}}});},eachImg:function(_self){var my_src=_self.attr('data-src');_self.attr('src',my_src).removeAttr('data-src');},removeLoader:function(el){el.parent().addClass('loaded');setTimeout(function(){el.remove();},500);}},setPlaceholders=function(obj){if(typeof $.fn.placeholder==='function'){obj.placeholder();}else{throw new Error('$.fn.placeholder is undefined!');}},setEZCheckboxes=function(obj){if(typeof $.fn.ezMark==='function'){obj.ezMark();}else{throw new Error('$.fn.setEZCheckboxes is undefined!');}},setBxSlider=function(slider,options){if(typeof $.fn.bxSlider==='function'){var opt=options||{};slider.bxSlider(opt);}else{throw new Error('$.fn.bxSlider is undefined!');}},setScrollLinks=function(link){var scrollSpeed=800;link.on('click',function(e){e.preventDefault();var hrefValue=$(this).attr('href'),targetObj=$(hrefValue).offset().top- 90;$('html, body').animate({scrollTop:targetObj},scrollSpeed);});},expandBeforeAfterBlock=function(){var
beforeAndAfterWrapper=$('.before-and-after-wrapper'),beforeAndAfterRow=$('.baac-row',beforeAndAfterWrapper),beforeAfterRowItem=$('.baac-item',beforeAndAfterRow),beforeAndAfterOpenButton=$('.baac-more a, .baac-img a',beforeAndAfterRow),beforeAfterImgTrigger=$('.js-baac-image-thigger',beforeAndAfterWrapper),win$=$(window),offsetMargin=-80,scrollSpeed=400,animateSpeed=300,debugState=false,animationComplited=true;setCloseLinkHandler(beforeAndAfterWrapper.find('.baac-link-close'));beforeAfterRowItem.hover(function(){var parent=$(this).parent('.baac-visible-row');parent.addClass('baac-visible-row-hover');parent.find('.baac-item').not($(this)).addClass('faded');},function(){var parent=$(this).parent('.baac-visible-row');parent.removeClass('baac-visible-row-hover');parent.find('.baac-item').not($(this)).removeClass('faded');});beforeAfterImgTrigger.each(function(){$(this).click(function(e){e.preventDefault();$(this).closest('.baac-row').find('.baac-img a[data-index="1"]').trigger('click');});});var imgFrame=$('.baac-slider-frame');imgFrame.on('click',function(e){e.preventDefault();var $e=$(e.target);if($e.is('img, a')){var inactiveLink=$(this).closest('.baac-slider').find('.baac-slider-tn li').filter(':not(.active)');inactiveLink.find('a').trigger('click');}});beforeAndAfterOpenButton.each(function(){var _link=$(this);_link.on('click',function(e){e.preventDefault();if(!animationComplited){return;}
var _link=$(this),parentRow=_link.closest('.baac-frame').closest('.baac-row'),parentRowClasses=parentRow.attr('class'),isCurrentLinkHasActiveClass=parentRowClasses.indexOf('baac-row-active'),parentItemClasses=_link.closest('.baac-item').attr('class'),isCurrentLinkInActiveItem=parentItemClasses.indexOf('baac-item-active'),sliderRow=parentRow.find('.baac-slider-holder'),sliderTn=parentRow.find('.baac-slider-tn'),linkIndex=_link.data('index')- 1;il.render(_link.closest('.baac-frame').find('.baac-hidden-row'));setTNLinksHandler(sliderTn,sliderRow);if(beforeAndAfterWrapper.find('.baac-row-active').length){debug('Hidden window is already open');if(-1!==isCurrentLinkHasActiveClass){debug('Link is in the open window');if(-1===isCurrentLinkInActiveItem){debug('Change active window');parentRow.find('.baac-item').removeClass('baac-item-active');parentRow.find('.baac-item').eq(linkIndex).addClass('baac-item-active');swapImages(sliderRow,linkIndex);swapThumbnails(sliderTn,linkIndex);}else{debug('Open window');openWindow(_link);}}else{debug('The window is open in another location - swap window');closeWindow(_link);}}else{debug('Open new hidden window');openWindow(_link);}
addHash(_link);});});function getOffset(obj,offsetMargin){debug('Run getOffset()');return obj.offset().top+ offsetMargin;}
function setDisplayCSS(obj){debug('Run setDisplayCSS()');obj.css('display','block');}
function setHideCSS(obj){debug('Run setHideCSS()');obj.css('display','none');}
function setScrollTo(element,scrollPosition,scrollSpeed,options){debug('Run setScrollTo()');element=$('html ,body');element.animate({scrollTop:scrollPosition},scrollSpeed).promise().done(function(){if(typeof options.onAfter==="function"){options.onAfter();}});}
function swapImages(sliderRow,linkIndex){debug('Run swapImages()');var imgToHide=null;switch(linkIndex){case 0:imgToHide=1;break;case 1:imgToHide=0;break;}
sliderRow.find('.hidden').css('display','none').removeClass('hidden').css('display','');sliderRow.find('img').eq(imgToHide).css('display','none').addClass('hidden').css('display','');}
function swapThumbnails(sliderTn,linkIndex){debug('Run swapThumbnails()');var tnToHide=null;switch(linkIndex){case 0:tnToHide=1;break;case 1:tnToHide=0;break;}
sliderTn.find('li').eq(tnToHide).removeClass('active');sliderTn.find('li').eq(linkIndex).addClass('active');}
function swapActiveBlocks(ind){debug('Run swapActiveBlocks()');beforeAndAfterWrapper.find('.baac-row-active .baac-item').removeClass('baac-item-active');beforeAndAfterWrapper.find('.baac-row-active .baac-item').eq(ind).addClass('baac-item-active');}
function setTNLinksHandler(sliderTn,sliderRow){debug('Run setTNLinksHandler()');var tnLinks=sliderTn.find('ul a');tnLinks.each(function(ind){$(this).on('click',function(e){e.preventDefault();debug('On in setTNLinksHandler');if(!$(this).closest('li').hasClass('active')){swapThumbnails(sliderTn,ind);swapImages(sliderRow,ind);swapActiveBlocks(ind);}});});}
function setCloseLinkHandler(beforeAndAfterOpenButton){debug('Run setCloseLinkHandler()');beforeAndAfterOpenButton.each(function(){$(this).on('click',function(e){e.preventDefault();var parentItem,parentRow,hiddenRow,sliderRow,sliderTn;animationComplited=false;parentRow=$(this).closest('.baac-hidden-row').closest('.baac-frame').closest('.baac-row');parentItem=parentRow.find('.baac-item');hiddenRow=parentRow.find('.baac-hidden-row');sliderRow=parentRow.find('.baac-slider-holder');sliderTn=parentRow.find('.baac-slider-tn');parentRow.removeClass('baac-row-active ba-active-lnk');parentItem.removeClass('baac-item-active');hiddenRow.animate({'height':0},animateSpeed,function(){sliderRow.find('img').removeClass('hidden').show();sliderTn.find('li').removeClass('active');hiddenRow.css({'height':'','display':''});animationComplited=true;});if(window.history&&window.history.pushState){history.pushState('',document.title,window.location.pathname);}});});}
function closeWindow(link){debug('Run closeWindow()');var activeVisibleRow=beforeAndAfterWrapper.find('.baac-row-active'),hiddenRow=activeVisibleRow.find('.baac-hidden-row'),sliderRow=activeVisibleRow.find('.baac-slider-holder'),sliderTn=activeVisibleRow.find('.baac-slider-tn'),parentItem=activeVisibleRow.find('.baac-item');if(!animationComplited){return;}
animationComplited=false;hiddenRow.animate({'height':0},animateSpeed,function(){sliderRow.find('img').removeClass('hidden').show();sliderTn.find('li').removeClass('active');parentItem.removeClass('baac-item-active');setHideCSS(hiddenRow);beforeAndAfterWrapper.find('.baac-row').removeClass('baac-row-active');animationComplited=true;openWindow(link);});}
function openWindow(link){debug('Run openWindow()');var parentRow=link.closest('.baac-frame').closest('.baac-row'),sliderRow=parentRow.find('.baac-slider-holder'),linkIndex=link.data('index')- 1,sliderTn=parentRow.find('.baac-slider-tn'),parentItem=link.closest('.baac-item'),hiddenRow=parentRow.find('.baac-hidden-row');if(!animationComplited){return;}
animationComplited=false;parentRow.addClass('baac-row-active');parentRow.addClass('ba-active-lnk');sliderRow.find('img').not(':eq('+ linkIndex+')').addClass('hidden');sliderTn.find('li').eq(linkIndex).addClass('active');setDisplayCSS(hiddenRow);setScrollTo(win$,getOffset(hiddenRow,offsetMargin),scrollSpeed,{onAfter:function(){var hiddenWindowH=hiddenRow.find('.baac-hidden-item').innerHeight();hiddenRow.animate({'height':hiddenWindowH},animateSpeed,function(){hiddenRow.css('height','auto');animationComplited=true;});parentItem.addClass('baac-item-active');}});}
function checkLocationHash(){var hash=window.location.hash;if(hash!==''){var elId=hash.replace('#','');var element=$('a[data-hash-id="'+ elId+'"]').first();var _linkParent=element.parents('baac-row');if(element.length&&!_linkParent.hasClass('ba-active-lnk')){element.trigger('click');}}}
function addHash(link){var id=link.data('hash-id');if(typeof id!=='undefined'&&id!==''){window.location.hash=id;}}
$(window).on('load',function(){checkLocationHash();});function debug(msg){if(debugState){console.info(msg);}}},expandTestimonialsBlock=function(){var testimonialsHolder=$('.all-testimonials'),testimonialRow=$('.testimonial-row',testimonialsHolder),testimonialOpenButtonParent=$('.at-item',testimonialRow),testimonialOpenButton=$('.occc-thumb-link',testimonialOpenButtonParent),testimonialCloseButton=testimonialsHolder.find('.btn-close-it'),win$=$(window),offsetMargin=-100,scrollSpeed=400,animateSpeed=300,animationComplited=true;setCloseLinkHandler(testimonialCloseButton);$(window).on('resize',function(){var boxModel=testimonialsHolder.find('.at-item').eq(0).css('display'),active=testimonialsHolder.find('.testimonial-row-active'),activeitem=active.find('.at-item-active'),hiddenRow=active.find('.testimonial-hidden-row');if(boxModel!=='block'){if(active.length){var allItems=active.find('.at-item'),allItemsLength=allItems.length;if(!allItems.eq(allItemsLength- 1).next('.testimonial-hidden-row').length){active.find('.frame').append(hiddenRow);}}}else{if(activeitem.length&&!activeitem.next('.testimonial-hidden-row').length){hiddenRow.insertAfter(activeitem);}}});testimonialOpenButton.each(function(){var _link=$(this);_link.on('click',function(e){e.preventDefault();if(!animationComplited){return;}
var mode,boxModel=$(this).closest('.at-item').css('display');if(boxModel!=='block'){mode=2;}else{mode=1;}
var _link=$(this),parentRow=_link.closest('.testimonial-row'),linkIndex=_link.data('open-item'),hiddenRow=parentRow.find('.testimonial-hidden-row'),parentItem=_link.closest('.at-item'),parentRowClasses=parentRow.attr('class'),isCurrentParentHasActiveClass=parentRowClasses.indexOf('testimonial-row-active'),isCurrentLinkHasActiveParent=_link.closest(testimonialOpenButtonParent).attr('class').indexOf('at-item-active');if(testimonialsHolder.find('.testimonial-row-active').length){if(-1!==isCurrentParentHasActiveClass){if(-1===isCurrentLinkHasActiveParent){if(mode===1){closeWindow(_link);}else{parentRow.find('.at-item').removeClass('at-item-active');_link.closest('.at-item').addClass('at-item-active');var iFrame=parentRow.find('.tr-item').filter(':visible').find('.video-box-inner iframe');iFrame.attr('src',iFrame.attr('src'));parentRow.find('.tr-item').filter(':visible').fadeOut(100,function(){parentRow.find('.tr-item').filter('[data-item="'+ linkIndex+'"]').fadeIn();});}}else{openWindow(_link,parentRow,hiddenRow,parentItem,linkIndex,mode);}}else{var iFrame=$('.testimonial-hidden-row').filter(':visible').find('.tr-item').filter(':visible').find('.video-box-inner iframe');iFrame.attr('src',iFrame.attr('src'));closeWindow(_link);}}else{openWindow(_link,parentRow,hiddenRow,parentItem,linkIndex,mode);}});});function setHideCSS(obj){obj.css('display','none');}
function setScrollTo(element,scrollPosition,scrollSpeed,options){element=$('html ,body');element.animate({scrollTop:scrollPosition},scrollSpeed).promise().done(function(){if(typeof options.onAfter==="function"){options.onAfter();}});}
function getOffset(obj,offsetMargin){return obj.offset().top+ offsetMargin;}
function setCloseLinkHandler(closeBtn){closeBtn.each(function(){$(this).on('click',function(e){e.preventDefault();var parentItem,parentRow,hiddenRow;animationComplited=false;parentRow=$(this).closest('.testimonial-row');parentItem=parentRow.find('.at-item');hiddenRow=parentRow.find('.testimonial-hidden-row');parentRow.removeClass('testimonial-row-active');hiddenRow.animate({'height':0},animateSpeed,function(){var iFrame=hiddenRow.find('.tr-item').filter(':visible').find('.video-box-inner iframe');iFrame.attr('src',iFrame.attr('src'));hiddenRow.find('.tr-item').css('display','');hiddenRow.css({'height':'','display':''});parentItem.removeClass('at-item-active');animationComplited=true;});});});}
function closeWindow(link){var activeVisibleRow=testimonialsHolder.find('.testimonial-row-active'),hiddenRow=activeVisibleRow.find('.testimonial-hidden-row'),parentItem=activeVisibleRow.find('.at-item');if(!animationComplited){return;}
animationComplited=false;hiddenRow.animate({'height':0},animateSpeed,function(){parentItem.removeClass('at-item-active');setHideCSS(hiddenRow);setHideCSS(hiddenRow.find('.tr-item'));activeVisibleRow.removeClass('testimonial-row-active');animationComplited=true;var mode,boxModel=link.closest('.at-item').css('display');if(boxModel!=='block'){mode=2;}else{mode=1;}
var parentRowLink=link.closest('.testimonial-row'),linkIndexLink=link.data('open-item'),hiddenRowLink=parentRowLink.find('.testimonial-hidden-row'),parentItemLink=link.closest('.at-item');openWindow(link,parentRowLink,hiddenRowLink,parentItemLink,linkIndexLink,mode);});}
function openWindow(link,parentRow,hiddenRow,parentItem,linkIndex,mode){if(!animationComplited){return;}
if(mode===1){hiddenRow.insertAfter(parentItem);}
animationComplited=false;parentRow.addClass('testimonial-row-active');hiddenRow.show(0,function(){setScrollTo(win$,getOffset(hiddenRow,offsetMargin),scrollSpeed,{onAfter:function(){if(!hiddenRow.find('.tr-item').filter('[data-item="'+ linkIndex+'"]').is(':visible')){hiddenRow.find('.tr-item').filter('[data-item="'+ linkIndex+'"]').show(0,function(){var hiddenWindowH=hiddenRow.find('.frame').innerHeight();hiddenRow.animate({'height':hiddenWindowH},animateSpeed,function(){hiddenRow.css('height','auto');animationComplited=true;});parentItem.addClass('at-item-active');});}else{animationComplited=true;}}});});}},expandVideosBlock=function(){var testimonialsHolder=$('.occ-all'),testimonialRow=$('.occ-columns',testimonialsHolder),testimonialOpenButtonParent=$('.occc-column',testimonialRow),testimonialOpenButton=$('.occc-thumb-link',testimonialOpenButtonParent),testimonialCloseButton=testimonialsHolder.find('.btn-close-it'),win$=$(window),offsetMargin=-68,scrollSpeed=400,animateSpeed=300,animationComplited=true;setCloseLinkHandler(testimonialCloseButton);$(window).on('resize',function(){var boxModel=testimonialsHolder.find('.occc-column').eq(0).css('float'),active=testimonialsHolder.find('.occ-columns-active'),activeitem=active.find('.occc-column-active'),hiddenRow=active.find('.testimonial-hidden-row');if(boxModel!=='none'){var allItems=testimonialsHolder.find('.occc-column'),allItemsSize=allItems.length;if(!allItems.eq(allItemsSize- 1).next('.testimonial-hidden-row').length){active.append(hiddenRow);}}else{if(activeitem.length&&!activeitem.next('.testimonial-hidden-row').length){hiddenRow.insertAfter(activeitem);}}});testimonialOpenButton.each(function(){var _link=$(this);_link.on('click',function(e){e.preventDefault();if(!animationComplited){return;}
var mode,boxModel=$(this).closest('.occc-column').css('float');if(boxModel!=='none'){mode=2;}else{mode=1;}
var _link=$(this),parentRow=_link.closest('.occ-columns'),linkIndex=_link.data('open-item'),hiddenRow=parentRow.find('.testimonial-hidden-row'),parentItem=_link.closest('.occc-column'),parentRowClasses=parentRow.attr('class'),isCurrentParentHasActiveClass=parentRowClasses.indexOf('occ-columns-active'),isCurrentLinkHasActiveParent=_link.closest(testimonialOpenButtonParent).attr('class').indexOf('occc-column-active');if(testimonialsHolder.find('.occ-columns-active').length){if(-1!==isCurrentParentHasActiveClass){if(-1===isCurrentLinkHasActiveParent){if(mode===1){closeWindow(_link);}else{var iFrame=parentRow.find('.tr-item').filter(':visible').find('.video-box-inner iframe');parentRow.find('.occc-column').removeClass('occc-column-active');_link.closest('.occc-column').addClass('occc-column-active');iFrame.attr('src',iFrame.attr('src'));parentRow.find('.tr-item').filter(':visible').fadeOut(100,function(){parentRow.find('.tr-item').filter('[data-item="'+ linkIndex+'"]').fadeIn();});}}else{openWindow(_link,parentRow,hiddenRow,parentItem,linkIndex,mode);}}else{closeWindow(_link);}}else{openWindow(_link,parentRow,hiddenRow,parentItem,linkIndex,mode);}});});function setHideCSS(obj){obj.css('display','none');}
function setScrollTo(element,scrollPosition,scrollSpeed,options){element=$('html ,body');element.animate({scrollTop:scrollPosition},scrollSpeed).promise().done(function(){if(typeof options.onAfter==="function"){options.onAfter();}});}
function getOffset(obj,offsetMargin){return obj.offset().top+ offsetMargin;}
function setCloseLinkHandler(closeBtn){closeBtn.each(function(){$(this).on('click',function(e){e.preventDefault();var parentItem,parentRow,hiddenRow;animationComplited=false;parentRow=$(this).closest('.occ-columns');parentItem=parentRow.find('.occc-column');hiddenRow=parentRow.find('.testimonial-hidden-row');parentRow.removeClass('occ-columns-active');hiddenRow.animate({'height':0},animateSpeed,function(){var iFrame=hiddenRow.find('.tr-item').filter(':visible').find('.video-box-inner iframe');iFrame.attr('src',iFrame.attr('src'));hiddenRow.find('.tr-item').css('display','');hiddenRow.css({'height':'','display':''});parentItem.removeClass('occc-column-active');animationComplited=true;});});});}
function closeWindow(link){var activeVisibleRow=testimonialsHolder.find('.occ-columns-active'),hiddenRow=activeVisibleRow.find('.testimonial-hidden-row'),parentItem=activeVisibleRow.find('.occc-column');if(!animationComplited){return;}
animationComplited=false;hiddenRow.animate({'height':0},animateSpeed,function(){parentItem.removeClass('occc-column-active');setHideCSS(hiddenRow);setHideCSS(hiddenRow.find('.tr-item'));activeVisibleRow.removeClass('occ-columns-active');animationComplited=true;var mode,boxModel=link.closest('.occc-column').css('float');if(boxModel!=='none'){mode=2;}else{mode=1;}
var parentRowLink=link.closest('.occ-columns'),linkIndexLink=link.data('open-item'),hiddenRowLink=parentRowLink.find('.testimonial-hidden-row'),parentItemLink=link.closest('.occc-column');openWindow(link,parentRowLink,hiddenRowLink,parentItemLink,linkIndexLink,mode);});}
function openWindow(link,parentRow,hiddenRow,parentItem,linkIndex,mode){if(!animationComplited){return;}
if(mode===1){hiddenRow.insertAfter(parentItem);}
animationComplited=false;parentRow.addClass('occ-columns-active');hiddenRow.show(0,function(){setScrollTo(win$,getOffset(hiddenRow,offsetMargin),scrollSpeed,{onAfter:function(){if(!hiddenRow.find('.tr-item').filter('[data-item="'+ linkIndex+'"]').is(':visible')){hiddenRow.find('.tr-item').filter('[data-item="'+ linkIndex+'"]').show(0,function(){var hiddenWindowH=hiddenRow.find('.frame').innerHeight();hiddenRow.animate({'height':hiddenWindowH},animateSpeed,function(){hiddenRow.css('height','auto');animationComplited=true;});parentItem.addClass('occc-column-active');});}else{animationComplited=true;}}});});}},expandTestimonials=function(){var moreLinkParent=$('.testimonial');if(moreLinkParent.length){moreLinkParent.each(function(){var moreContainer=$(this).find('.view-more-container'),detailsContainer=$(this).find('.details'),lessContainer=$(this).find('.re-collapse');moreContainer.find('a').on('click',function(eo){var parentRow=$(this).closest('.frame'),parentItems=parentRow.find('.at-item');eo.preventDefault();moreContainer.hide(0,function(){detailsContainer.css('display','inline');parentItems.css('height','');var testimonialsBlocks$EQ=new EqualBlocksHeight(parentItems,{splitBy:2,isResizable:true,isFullLoaded:true,isBoxSized:true});});});lessContainer.find('a').on('click',function(eo){var parentRow=$(this).closest('.frame'),parentItems=parentRow.find('.at-item');eo.preventDefault();detailsContainer.hide(0,function(){moreContainer.show(0,function(){parentItems.css('height','');var testimonialsBlocks$EQ=new EqualBlocksHeight(parentItems,{splitBy:2,isResizable:true,isFullLoaded:true,isBoxSized:true});});});});});}},expandFeatBlocks=function(no_scroll){var $_featuredWorkBlock=$('.js-expanded-section'),$_scrollObject=$('html, body'),$_wrapper=$('.wrapper'),SCROLL_SPEED=400,SLIDE_SPEED=300,OFFSET_TOP=-68,$wind=$(window);function setSizeMode(){var windowSize=$(window).width();if(windowSize<480){$_featuredWorkBlock.attr('data-mode','mode-1');}
else if(windowSize>480&&windowSize<769){$_featuredWorkBlock.attr('data-mode','mode-2');}
else{$_featuredWorkBlock.attr('data-mode','mode-3');}}
function expandedFullscreen(){var windowWidth=window.innerWidth,fullWidth=$(window).width(),frameWidth=$(".js-expanded-section").width(),gapesWidth=fullWidth- frameWidth,halfGapesWidth=gapesWidth/2;if(windowWidth>1024){$(".js-expanded-section .expanded-block").css({'margin-left':'-'+ halfGapesWidth+'px','margin-right':'-'+ halfGapesWidth+'px'});}
else{$(".js-expanded-section .expanded-block").css({'margin-left':'','margin-right':''});}}
function showExpandedObj(object){var $_expandedMode=$('.js-expanded-section .expanded-block'),scrollTopPosition=$_expandedMode.offset().top- topPad,checkVal;$_expandedMode.addClass('d-none').removeAttr('style');$_scrollObject.animate({scrollTop:scrollTopPosition+ OFFSET_TOP},SCROLL_SPEED,function(){$_expandedMode.slideDown(SLIDE_SPEED,function(){if(object.attr('data-video-type')==='wistia'){if(!checkVal){var qtyNumber=object.attr('data-qty-number')*1;$.ajax({type:"POST",url:'/wistia-video-storage',dataType:"html"}).done(function(data){$('.js-wistia-clone-obj .js-vbi-wistia').html($(data)[qtyNumber]);Wistia.embed(object.attr('data-wistia-id'),{videoFoam:true});$('.js-wistia-clone-obj .js-img-loader-wisty').remove();$('.js-wistia-clone-obj .js-vbi-wistia').removeAttr('style');});checkVal=true;}}
if(typeof(afterExpanded)!='undefined'){afterExpanded($_expandedMode);}});object.addClass('es-active-lnk');});expandedFullscreen();exCnt=1;clearloopSlider();exLoopSlider(exTimer);addFirstSlideActive();$(window).on('resize',function(){expandedFullscreen();});}
function reorderExpanded(){var expandedModeObj=$('.js-expanded-section .expanded-block'),featuredWorkBlock=$('.js-expanded-section');if(expandedModeObj.length!==0){var expandedBlockPosition=expandedModeObj.attr('data-block-position'),blockMode=featuredWorkBlock.attr('data-mode'),expandedElemPosition=+expandedModeObj.attr('data-elem-number'),currentActiveElem,blockContainer,previousMode,balanceNumber;if(expandedBlockPosition==='f'){blockContainer=$('.js-expanded-section-top');}
else{blockContainer=$('.js-expanded-section-bottom');}
var commonLength=$('.js-es-item',blockContainer).length;if(blockMode==='mode-3'){previousMode=$_wrapper.data('blockMode');if(previousMode==='mode-3'){return false;}
else if(previousMode==='mode-2'){balanceNumber=expandedElemPosition%3;if(balanceNumber===1){if((commonLength- 1)===expandedElemPosition){currentActiveElem=$('.js-es-item',blockContainer).eq(expandedElemPosition);expandedModeObj.insertAfter($(currentActiveElem));}
else{currentActiveElem=$('.js-es-item',blockContainer).eq(expandedElemPosition+ 1);expandedModeObj.insertAfter($(currentActiveElem));}}
else if(balanceNumber===2){currentActiveElem=$('.js-es-item',blockContainer).eq(expandedElemPosition);expandedModeObj.insertAfter($(currentActiveElem));}
else{currentActiveElem=$('.js-es-item',blockContainer).eq(expandedElemPosition- 1);expandedModeObj.insertAfter($(currentActiveElem));}}
$_wrapper.data('blockMode','mode-3');}
else if(blockMode==='mode-2'){previousMode=$_wrapper.data('blockMode');if(previousMode==='mode-3'){balanceNumber=expandedElemPosition%4;if(balanceNumber===1){currentActiveElem=$('.js-es-item',blockContainer).eq(expandedElemPosition);expandedModeObj.insertAfter($(currentActiveElem));}
else if(balanceNumber===2){currentActiveElem=$('.js-es-item',blockContainer).eq(expandedElemPosition- 1);expandedModeObj.insertAfter($(currentActiveElem));}
else if(balanceNumber===3){currentActiveElem=$('.js-es-item',blockContainer).eq(expandedElemPosition);expandedModeObj.insertAfter($(currentActiveElem));}
else{currentActiveElem=$('.js-es-item',blockContainer).eq(expandedElemPosition- 1);expandedModeObj.insertAfter($(currentActiveElem));}}
else if(previousMode==='mode-2'){return false;}
else{balanceNumber=expandedElemPosition%2;if(((commonLength- 1)===expandedElemPosition)&&balanceNumber!==1){currentActiveElem=$('.js-es-item',blockContainer).eq(expandedElemPosition- 1);expandedModeObj.insertAfter($(currentActiveElem));}
else{if(balanceNumber===1){currentActiveElem=$('.js-es-item',blockContainer).eq(expandedElemPosition);expandedModeObj.insertAfter($(currentActiveElem));}
else{currentActiveElem=$('.js-es-item',blockContainer).eq(expandedElemPosition- 1);expandedModeObj.insertAfter($(currentActiveElem));}}}
$_wrapper.data('blockMode','mode-2');}
else{currentActiveElem=$('.js-es-item',blockContainer).eq(expandedElemPosition- 1);expandedModeObj.insertAfter($(currentActiveElem));$_wrapper.data('blockMode','mode-1');}}}
function drawImgSide($img){var img_canvas=document.createElement('canvas'),img_ctx=img_canvas.getContext('2d'),side_width=10,$side;if($img.closest('.active-slide-item').length>0){$img.closest('.slide-item').addClass('start-draw');}
img_canvas.width=side_width;img_canvas.height=$img[0].naturalHeight;img_ctx.drawImage($img[0],0,0,2,$img[0].naturalHeight,0,0,side_width,$img[0].naturalHeight);img_ctx.save();img_ctx.fillStyle='rgba(0, 0, 0, 0.2)';img_ctx.rect(0,0,side_width,$img[0].naturalHeight);img_ctx.fill();img_ctx.restore();$side=$('<img alt=""/>');$side.attr('crossOrigin','anonymous');$side.attr('src',img_canvas.toDataURL());$side.addClass('img-side').insertBefore($img);$img.addClass('img-body');}
function expandedMode(object,blockContainer,elemNumber,hiddenExpandedObj,blocksQty,blockMode,mode3SecondElem,mode3FirstElem,mode2FirstElem,blockPosition){var videoContainer=$('.js-es-text',hiddenExpandedObj),balanceNumber,expContentObjHTML=videoContainer.clone(true),$big_imgs=expContentObjHTML.find('.js-feat-image img'),imgCounter=0,$big_imgs_length=$big_imgs.length;function setScroll(){var $active_slide=expContentObjHTML.find('.active-slide-item'),$active_inner=$active_slide.find('.slide-item-inner');setTimeout(function(){$active_inner.closest('.start-draw').removeClass('start-draw');expContentObjHTML.find('.active-slide-item').removeClass('start-load');},500);if(!no_scroll&&!$active_slide.hasClass('no-scroll')){$active_inner.mCustomScrollbar();setTimeout(function(){$active_inner.mCustomScrollbar("scrollTo",'bottom',{scrollInertia:6000,scrollEasing:"linear"});setTimeout(function(){$active_inner.mCustomScrollbar("scrollTo",'top',{scrollInertia:6000,scrollEasing:"linear"});setTimeout(function(){$active_inner.closest('.start-draw').removeClass('start-draw');},6000);},3000);},2000);}}
$big_imgs.each(function(){var $img=$(this);if($img.closest('.no-transform').length){imgCounter++;return;}
var $slide=$img.closest('.js-slide-item');if((!$slide.is(':first-child')&&!$slide.hasClass('scroll'))||no_scroll||$slide.hasClass('no-scroll')){$img.wrapAll('<div class="slide-img-wr"></div>');}
$img.on({load:function(){if((!$img.prev('.img-side').length||$img.prev('.img-side').width()<2)&&$img.length){$img.prev('.img-side').remove();$('<div class="img-side"></div>').addClass('img-side-block').append($img.clone().removeAttr('class')).insertBefore($img).hide();}
imgCounter++;if(imgCounter==$big_imgs_length){setTimeout("$('.img-side').show();",500);}}});});expContentObjHTML.find('.active-slide-item').addClass('start-load');if(hiddenExpandedObj.find('img').attr('src')){setTimeout(function(){setScroll();},100);}else{il.render(hiddenExpandedObj,expContentObjHTML,setScroll);}
if(videoContainer.attr('data-video-type')==='wistia'){expContentObjHTML.addClass('js-wistia-clone-obj');}
if(blockMode==='mode-3'){if(mode3SecondElem&&elemNumber===blocksQty){$('.js-es-item',blockContainer).eq(elemNumber- 1).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-block"></div>');expContentObjHTML.appendTo('.js-expanded-section .expanded-block');showExpandedObj(object);}
else if(mode3SecondElem&&elemNumber===blocksQty- 1){$('.js-es-item',blockContainer).eq(elemNumber).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-block"></div>');expContentObjHTML.appendTo('.js-expanded-section .expanded-block');showExpandedObj(object);}
else if(mode3FirstElem&&elemNumber===blocksQty){$('.js-es-item',blockContainer).eq(elemNumber- 1).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-block"></div>');expContentObjHTML.appendTo('.js-expanded-section .expanded-block');showExpandedObj(object);}
else{balanceNumber=elemNumber%3;if(balanceNumber===0){$('.js-es-item',blockContainer).eq(elemNumber- 1).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-block"></div>');expContentObjHTML.appendTo('.js-expanded-section .expanded-block');showExpandedObj(object);}
else if(balanceNumber===2){$('.js-es-item',blockContainer).eq(elemNumber).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-block"></div>');expContentObjHTML.appendTo('.js-expanded-section .expanded-block');showExpandedObj(object);}
else{$('.js-es-item',blockContainer).eq(elemNumber+ 1).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-block"></div>');expContentObjHTML.appendTo('.js-expanded-section .expanded-block');showExpandedObj(object);}}}
else if(blockMode==='mode-2'){if(mode2FirstElem&&elemNumber===blocksQty){$('.js-es-item',blockContainer).eq(elemNumber- 1).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-block"></div>');expContentObjHTML.appendTo('.js-expanded-section .expanded-block');showExpandedObj(object);}
else{balanceNumber=elemNumber%2;if(balanceNumber===0){$('.js-es-item',blockContainer).eq(elemNumber- 1).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-block"></div>');expContentObjHTML.appendTo('.js-expanded-section .expanded-block');showExpandedObj(object);}
else if(balanceNumber===1){$('.js-es-item',blockContainer).eq(elemNumber).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-block"></div>');expContentObjHTML.appendTo('.js-expanded-section .expanded-block');showExpandedObj(object);}}}
else{$('.js-es-item',blockContainer).eq(elemNumber- 1).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-block"></div>');expContentObjHTML.appendTo('.js-expanded-section .expanded-block');showExpandedObj(object);}}
function expandedModeAfterMe(object,blockContainer,elemNumber,hiddenExpandedObj,blockPosition){var videoContainer=$('.js-es-text',hiddenExpandedObj),balanceNumber,expContentObjHTML=videoContainer.clone(true),$big_imgs=expContentObjHTML.find('.js-feat-image img'),imgCounter=0,$big_imgs_length=$big_imgs.length;function setScroll(){var $active_slide=expContentObjHTML.find('.active-slide-item'),$active_inner=$active_slide.find('.slide-item-inner');setTimeout(function(){$active_inner.closest('.start-draw').removeClass('start-draw');expContentObjHTML.find('.active-slide-item').removeClass('start-load');},500);if(!no_scroll&&!$active_slide.hasClass('no-scroll')){$active_inner.mCustomScrollbar();setTimeout(function(){$active_inner.mCustomScrollbar("scrollTo",'bottom',{scrollInertia:6000,scrollEasing:"linear"});setTimeout(function(){$active_inner.mCustomScrollbar("scrollTo",'top',{scrollInertia:6000,scrollEasing:"linear"});setTimeout(function(){$active_inner.closest('.start-draw').removeClass('start-draw');},6000);},3000);},2000);}}
$big_imgs.each(function(){var $img=$(this);if($img.closest('.no-transform').length){imgCounter++;return;}
var $slide=$img.closest('.js-slide-item');if((!$slide.is(':first-child')&&!$slide.hasClass('scroll'))||no_scroll||$slide.hasClass('no-scroll')){$img.wrapAll('<div class="slide-img-wr"></div>');}
$img.on({load:function(){if((!$img.prev('.img-side').length||$img.prev('.img-side').width()<2)&&$img.length){$img.prev('.img-side').remove();$('<div class="img-side"></div>').addClass('img-side-block').append($img.clone().removeAttr('class')).insertBefore($img).hide();}
imgCounter++;if(imgCounter==$big_imgs_length){setTimeout("$('.img-side').show();",500);}}});});expContentObjHTML.find('.active-slide-item').addClass('start-load');if(hiddenExpandedObj.find('img').attr('src')){setTimeout(function(){setScroll();},100);}else{il.render(hiddenExpandedObj,expContentObjHTML,setScroll);}
if(videoContainer.attr('data-video-type')==='wistia'){expContentObjHTML.addClass('js-wistia-clone-obj');}
var position=elemNumber- 1;position=position<0?0:position;$('.js-es-item',blockContainer).eq(position).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-block"></div>');expContentObjHTML.appendTo('.js-expanded-section .expanded-block');showExpandedObj(object);}
function checkLocationHash(){var hash=window.location.hash;if(hash!==''){var elId=hash.replace('#','');var element=$('a[data-hash-id="'+ elId+'"]');if(element.length&&!element.hasClass('es-active-lnk')){element.trigger('click');}}}
function addHash(link){var id=link.data('hash-id');if(typeof id!=='undefined'&&id!==''){window.location.hash=id;}}
function initLayout(){setSizeMode();$('.wrapper').data('blockMode',$('.js-expanded-section').attr('data-mode'));}
initLayout();$('.js-feat-gallery .js-feat-thumbnails a').on('click',function(e){e.preventDefault();var _selfSl=$(this),currentClickLnkSlEq=_selfSl.index(),parentSlNode=_selfSl.parents('.js-feat-gallery'),$slide=$('.js-feat-image .slide-item',parentSlNode).eq(currentClickLnkSlEq);$('.js-feat-thumbnails a',parentSlNode).removeClass('active');$('.js-feat-image .slide-item.past-slide-item').removeClass('past-slide-item');$('.js-feat-image .slide-item',parentSlNode).removeClass('active-slide-item').addClass('past-slide-item');_selfSl.addClass('active');$slide.removeClass('past-slide-item').addClass('active-slide-item');if((_selfSl.is(':first-child')||$slide.hasClass('scroll'))&&!no_scroll&&!$slide.hasClass('no-scroll')){if($slide.hasClass('scroll-auto')){$slide.find('.slide-item-inner').mCustomScrollbar();setTimeout(function(){$slide.find('.slide-item-inner').mCustomScrollbar("scrollTo",'bottom',{scrollInertia:5000,scrollEasing:"linear"});setTimeout(function(){$slide.find('.slide-item-inner').mCustomScrollbar("scrollTo",'top',{scrollInertia:5000,scrollEasing:"linear"});},3000);},1000);$slide.removeClass('scroll-auto');}else{$slide.find('.slide-item-inner').mCustomScrollbar();}}else{if(!$slide.find('.slide-img-wr').length){$slide.find('img').wrapAll('<div class="slide-img-wr"></div>');}}});$(window).on('load',function(){checkLocationHash();});$(window).on('resize',function(){var expandedModeObj=$('.js-expanded-section .expanded-block');setSizeMode();if(!BFM.isMobile()){reorderExpanded();}});$('body').mouseup(function(e){var $popup=$('.js-expanded-section .expanded-block');if(!$popup.is(e.target)&&$popup.has(e.target).length===0&&!$('.js-es-item').is(e.target)&&$('.js-es-item').has(e.target).length===0&&$('.lp-steps li').has(e.target).length===0&&!$('.demo-reel-block').is(e.target)&&$('.demo-reel-block').has(e.target).length===0&&!$('.jq-link-box, .pull-left, .pull-right, .lp-steps li').is(e.target)){$('.js-es-close').click();}});$('.js-es-close').on('click',function(e){e.preventDefault();$('.js-es-lnk').removeClass('es-active-lnk');$('.js-expanded-section .expanded-block').slideUp('300',function(){$(this).remove();if(window.history&&window.history.pushState){history.pushState('',document.title,window.location.pathname);}});});$('.js-es-lnk, .js-hs-btn').on('click',function(e){e.preventDefault();var clickObj=($(this).hasClass('js-hs-btn'))?$('.js-es-item [data-hash-id="'+ $(this).data('hash-id')+'"]'):$(this),hiddenExpandedObj=clickObj.next(),iDValue=hiddenExpandedObj.attr('id'),elemNumber=+iDValue.substr(5),blockPos=iDValue.substr(0,1),blockContainer,blockMode=$('.js-expanded-section').attr('data-mode'),mode3SecondElem,mode3FirstElem,mode2FirstElem,blockPosition,expandedModeObj=$('.js-expanded-section .expanded-block');addHash($(this));$('.js-es-lnk').removeClass('es-active-lnk');if(blockPos==='f'){blockPosition='f';blockContainer=$('.js-expanded-section-top');var topBlocksQty=$('.js-expanded-section-top .js-es-item').length;if(blockMode==='mode-3'){if(topBlocksQty%3===2){mode3SecondElem=true;}
else if(topBlocksQty%3===1){mode3FirstElem=true;}}
else if(blockMode==='mode-2'){if(topBlocksQty%2===1){mode2FirstElem=true;}}
if(expandedModeObj.length>0){expandedModeObj.slideUp('300',function(){$(this).remove();expandedMode(clickObj,blockContainer,elemNumber,hiddenExpandedObj,topBlocksQty,blockMode,mode3SecondElem,mode3FirstElem,mode2FirstElem,blockPosition);});}
else{expandedMode(clickObj,blockContainer,elemNumber,hiddenExpandedObj,topBlocksQty,blockMode,mode3SecondElem,mode3FirstElem,mode2FirstElem,blockPosition);}}
else{blockPosition='s';blockContainer=$('.js-expanded-section-bottom');var bottomBlocksQty=$('.js-expanded-section-bottom .js-es-item').length;if(blockMode==='mode-3'){if(bottomBlocksQty%3===2){mode3SecondElem=true;}
else if(bottomBlocksQty%3===1){mode3FirstElem=true;}}
else if(blockMode==='mode-2'){if(bottomBlocksQty%2===1){mode2FirstElem=true;}}
if(expandedModeObj.length>0){expandedModeObj.slideUp('300',function(){$(this).remove();expandedMode(clickObj,blockContainer,elemNumber,hiddenExpandedObj,bottomBlocksQty,blockMode,mode3SecondElem,mode3FirstElem,mode2FirstElem,blockPosition);});}
else{expandedMode(clickObj,blockContainer,elemNumber,hiddenExpandedObj,bottomBlocksQty,blockMode,mode3SecondElem,mode3FirstElem,mode2FirstElem,blockPosition);}}});$('.jq-open-after-me .js-es-lnk').off('click');$('.jq-open-after-me .js-es-lnk').on('click',function(e){e.preventDefault();var clickObj=$(this),hiddenExpandedObj=clickObj.next(),iDValue=hiddenExpandedObj.attr('id'),elemNumber=+iDValue.substr(5),blockPos=iDValue.substr(0,1),blockContainer,blockMode=$('.js-expanded-section').attr('data-mode'),mode3SecondElem,mode3FirstElem,mode2FirstElem,blockPosition,expandedModeObj=$('.js-expanded-section .expanded-block'),winWidth=$(window).width();addHash($(this));$('.js-es-lnk').removeClass('es-active-lnk');blockContainer=$('.js-expanded-section-bottom');if(expandedModeObj.length>0){expandedModeObj.slideUp('300',function(){$(this).remove();expandedModeAfterMe(clickObj,blockContainer,elemNumber,hiddenExpandedObj,blockPosition);if(winWidth>1024){var area=$('.expanded-block').find('.scroll-area');area.mCustomScrollbar();}});}
else{expandedModeAfterMe(clickObj,blockContainer,elemNumber,hiddenExpandedObj,blockPosition);}
setTimeout(function(){if(winWidth>1024){var area=$('.expanded-block').find('.scroll-area');area.mCustomScrollbar();}},100);});},expandPortfolioBlocks=function(){var $_featuredWorkBlock=$('.js-featured-work-block'),$_scrollObject=$('html, body'),$_wrapper=$('.wrapper'),SCROLL_SPEED=400,SLIDE_SPEED=300,OFFSET_TOP=-68;function setSizeMode(){if($_featuredWorkBlock.hasClass('wide-mode')){$_featuredWorkBlock.attr('data-mode','mode-1');}
else{var windowSize=$(window).width();if(windowSize<480){$_featuredWorkBlock.attr('data-mode','mode-1');}
else if(windowSize>480&&windowSize<769){$_featuredWorkBlock.attr('data-mode','mode-2');}
else{$_featuredWorkBlock.attr('data-mode','mode-3');}}}
function expandedFullscreen(){var windowWidth=window.innerWidth,fullWidth=$(window).width(),frameWidth=$(".js-featured-work-fullscreen").width(),textWidth=$(".ec-fs-descr").outerWidth(),gapesWidth=fullWidth- frameWidth,halfGapesWidth=gapesWidth/2,contentWidth=fullWidth- halfGapesWidth,leftSliderWidth=contentWidth- textWidth;if(windowWidth>1024&&!$(".js-featured-work-fullscreen .ec-gallery").hasClass('brand-gallery')){$(".js-featured-work-fullscreen .expanded-mode").css({'margin-left':'-'+ halfGapesWidth+'px','margin-right':'-'+ halfGapesWidth+'px'});$(".js-featured-work-fullscreen .js-thumbnails, .js-slide-thumbnails").css({'margin-left':halfGapesWidth+'px','width':frameWidth+'px'});$(".js-featured-work-fullscreen .ec-fs-aside-img").css({'width':halfGapesWidth+ 262+'px'});$(".js-featured-work-fullscreen .js-ec-gallery, .js-ec-slide-gallery").css({'width':contentWidth+'px'});$(".js-featured-work-fullscreen .ecg-image-box").css({'width':leftSliderWidth+'px'});}
else{if($(".js-featured-work-fullscreen .ec-gallery").hasClass('brand-gallery')){$(".js-featured-work-fullscreen .expanded-mode").css({'margin-left':'-'+ halfGapesWidth+'px','margin-right':'-'+ halfGapesWidth+'px'});}
else{$(".js-featured-work-fullscreen .expanded-mode").css({'margin-left':'','margin-right':''});$(".js-featured-work-fullscreen .js-thumbnails, .js-slide-thumbnails").css({'margin-left':'','width':'100%'});$(".js-featured-work-fullscreen .js-ec-gallery, .js-ec-slide-gallery").css({'width':''});$(".js-featured-work-fullscreen .ecg-image-box").css({'width':''});}}}
function showExpandedObj(object){var $_expandedMode=$('.js-featured-work-block .expanded-mode'),scrollTopPosition=$_expandedMode.offset().top- topPad,checkVal;$_expandedMode.addClass('d-none').removeAttr('style');$_scrollObject.animate({scrollTop:scrollTopPosition+ OFFSET_TOP},SCROLL_SPEED,function(){$_expandedMode.slideDown(SLIDE_SPEED,function(){if(object.attr('data-video-type')==='wistia'){if(!checkVal){var qtyNumber=object.attr('data-qty-number')*1;$.ajax({type:"POST",url:'/wistia-video-storage',dataType:"html"}).done(function(data){$('.js-wistia-clone-obj .js-vbi-wistia').html($(data)[qtyNumber]);Wistia.embed(object.attr('data-wistia-id'),{videoFoam:true});$('.js-wistia-clone-obj .js-img-loader-wisty').remove();$('.js-wistia-clone-obj .js-vbi-wistia').removeAttr('style');});checkVal=true;}}
if(typeof(afterExpanded)!='undefined'){afterExpanded(object,$_expandedMode,$_scrollObject);}});object.addClass('active-lnk');});expandedFullscreen();exCnt=1;clearloopSlider();exLoopSlider(exTimer);addFirstSlideActive();$(window).on('resize',function(){expandedFullscreen();});}
function reorderExpanded(){var expandedModeObj=$('.js-featured-work-block .expanded-mode'),featuredWorkBlock=$('.js-featured-work-block');if(expandedModeObj.length!==0){var expandedBlockPosition=expandedModeObj.attr('data-block-position'),blockMode=featuredWorkBlock.attr('data-mode'),expandedElemPosition=+expandedModeObj.attr('data-elem-number'),currentActiveElem,blockContainer,previousMode,balanceNumber;if(expandedBlockPosition==='f'){blockContainer=$('.js-featured-work-block-top');}
else{blockContainer=$('.js-featured-work-block-bottom');}
var commonLength=$('.fwb-item',blockContainer).length;if(blockMode==='mode-3'){previousMode=$_wrapper.data('blockMode');if(previousMode==='mode-3'){return false;}
else if(previousMode==='mode-2'){balanceNumber=expandedElemPosition%3;if(balanceNumber===1){if((commonLength- 1)===expandedElemPosition){currentActiveElem=$('.fwb-item',blockContainer).eq(expandedElemPosition);expandedModeObj.insertAfter($(currentActiveElem));}
else{currentActiveElem=$('.fwb-item',blockContainer).eq(expandedElemPosition+ 1);expandedModeObj.insertAfter($(currentActiveElem));}}
else if(balanceNumber===2){currentActiveElem=$('.fwb-item',blockContainer).eq(expandedElemPosition);expandedModeObj.insertAfter($(currentActiveElem));}
else{currentActiveElem=$('.fwb-item',blockContainer).eq(expandedElemPosition- 1);expandedModeObj.insertAfter($(currentActiveElem));}}
$_wrapper.data('blockMode','mode-3');}
else if(blockMode==='mode-2'){previousMode=$_wrapper.data('blockMode');if(previousMode==='mode-3'){balanceNumber=expandedElemPosition%4;if(balanceNumber===1){currentActiveElem=$('.fwb-item',blockContainer).eq(expandedElemPosition);expandedModeObj.insertAfter($(currentActiveElem));}
else if(balanceNumber===2){currentActiveElem=$('.fwb-item',blockContainer).eq(expandedElemPosition- 1);expandedModeObj.insertAfter($(currentActiveElem));}
else if(balanceNumber===3){currentActiveElem=$('.fwb-item',blockContainer).eq(expandedElemPosition);expandedModeObj.insertAfter($(currentActiveElem));}
else{currentActiveElem=$('.fwb-item',blockContainer).eq(expandedElemPosition- 1);expandedModeObj.insertAfter($(currentActiveElem));}}
else if(previousMode==='mode-2'){return false;}
else{balanceNumber=expandedElemPosition%2;if(((commonLength- 1)===expandedElemPosition)&&balanceNumber!==1){currentActiveElem=$('.fwb-item',blockContainer).eq(expandedElemPosition- 1);expandedModeObj.insertAfter($(currentActiveElem));}
else{if(balanceNumber===1){currentActiveElem=$('.fwb-item',blockContainer).eq(expandedElemPosition);expandedModeObj.insertAfter($(currentActiveElem));}
else{currentActiveElem=$('.fwb-item',blockContainer).eq(expandedElemPosition- 1);expandedModeObj.insertAfter($(currentActiveElem));}}}
$_wrapper.data('blockMode','mode-2');}
else{currentActiveElem=$('.fwb-item',blockContainer).eq(expandedElemPosition- 1);expandedModeObj.insertAfter($(currentActiveElem));$_wrapper.data('blockMode','mode-1');}}}
function expandedMode(object,blockContainer,elemNumber,hiddenExpandedObj,blocksQty,blockMode,mode3SecondElem,mode3FirstElem,mode2FirstElem,blockPosition){var videoContainer=$('.fwbi-text',hiddenExpandedObj),balanceNumber,expContentObjHTML=videoContainer.clone(true);il.render(hiddenExpandedObj,expContentObjHTML);if(videoContainer.attr('data-video-type')==='wistia'){expContentObjHTML.addClass('js-wistia-clone-obj');}
if(blockMode==='mode-3'){if(mode3SecondElem&&elemNumber===blocksQty){$('.fwb-item',blockContainer).eq(elemNumber- 1).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-mode"></div>');expContentObjHTML.appendTo('.js-featured-work-block .expanded-mode');showExpandedObj(object);}
else if(mode3SecondElem&&elemNumber===blocksQty- 1){$('.fwb-item',blockContainer).eq(elemNumber).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-mode"></div>');expContentObjHTML.appendTo('.js-featured-work-block .expanded-mode');showExpandedObj(object);}
else if(mode3FirstElem&&elemNumber===blocksQty){$('.fwb-item',blockContainer).eq(elemNumber- 1).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-mode"></div>');expContentObjHTML.appendTo('.js-featured-work-block .expanded-mode');showExpandedObj(object);}
else{balanceNumber=elemNumber%3;if(balanceNumber===0){$('.fwb-item',blockContainer).eq(elemNumber- 1).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-mode"></div>');expContentObjHTML.appendTo('.js-featured-work-block .expanded-mode');showExpandedObj(object);}
else if(balanceNumber===2){$('.fwb-item',blockContainer).eq(elemNumber).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-mode"></div>');expContentObjHTML.appendTo('.js-featured-work-block .expanded-mode');showExpandedObj(object);}
else{$('.fwb-item',blockContainer).eq(elemNumber+ 1).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-mode"></div>');expContentObjHTML.appendTo('.js-featured-work-block .expanded-mode');showExpandedObj(object);}}}
else if(blockMode==='mode-2'){if(mode2FirstElem&&elemNumber===blocksQty){$('.fwb-item',blockContainer).eq(elemNumber- 1).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-mode"></div>');expContentObjHTML.appendTo('.js-featured-work-block .expanded-mode');showExpandedObj(object);}
else{balanceNumber=elemNumber%2;if(balanceNumber===0){$('.fwb-item',blockContainer).eq(elemNumber- 1).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-mode"></div>');expContentObjHTML.appendTo('.js-featured-work-block .expanded-mode');showExpandedObj(object);}
else if(balanceNumber===1){$('.fwb-item',blockContainer).eq(elemNumber).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-mode"></div>');expContentObjHTML.appendTo('.js-featured-work-block .expanded-mode');showExpandedObj(object);}}}
else{$('.fwb-item',blockContainer).eq(elemNumber- 1).after('<div style="position:absolute; visibility:hidden;" data-block-position="'+ blockPosition+'" data-elem-number="'+ elemNumber+'" class="expanded-mode"></div>');expContentObjHTML.appendTo('.js-featured-work-block .expanded-mode');showExpandedObj(object);}}
function checkLocationHash(){var hash=window.location.hash;if(hash!==''){var elId=hash.replace('#','');var element=$('a[data-hash-id="'+ elId+'"]');if(element.length&&!element.hasClass('active-lnk')){element.trigger('click');}}}
function addHash(link){var id=link.data('hash-id');if(typeof id!=='undefined'&&id!==''){window.location.hash=id;}}
function initLayout(){setSizeMode();$('.wrapper').data('blockMode',$('.featured-work-block').attr('data-mode'));}
initLayout();$('.js-ec-gallery .js-thumbnails a').on('click',function(e){e.preventDefault();var _self=$(this),currentClickLnkEq=_self.index(),parentNode=_self.parents('.js-ec-gallery');$('.js-thumbnails a',parentNode).removeClass('active');$('.js-main-image img',parentNode).removeAttr('style');_self.addClass('active');$('.js-main-image img',parentNode).eq(currentClickLnkEq).show().animate({opacity:1},600);});$('.js-ec-slide-gallery .js-slide-thumbnails a').on('click',function(e){var exp=$('.expanded-mode'),expFull=$('.expanded-block');e.preventDefault();clearloopSlider();var _selfSl=$(this),currentClickLnkSlEq=_selfSl.index(),parentSlNode=_selfSl.parents('.js-ec-slide-gallery');exCnt=currentClickLnkSlEq;$('.js-slide-thumbnails a',parentSlNode).removeClass('active');$('.js-slide-image img.past-slide').removeClass('past-slide');$('.js-slide-image img',parentSlNode).removeClass('active-slide-img').addClass('past-slide');_selfSl.addClass('active');$('.js-slide-image img',parentSlNode).eq(currentClickLnkSlEq).removeClass('past-slide');$('.js-slide-image img',parentSlNode).eq(currentClickLnkSlEq).addClass('active-slide-img');if(exp.length){if(exCnt==exp.find('.js-slide-thumbnails a').length- 1){exCnt=0;}else{exCnt++;}}
if(expFull.length){if(exCnt==expFull.find('.js-slide-thumbnails a').length- 1){exCnt=0;}else{exCnt++;}}
if($(".ec-gallery").hasClass('brand-gallery')){$('.brand-pager-holder .current-tab').css({left:_selfSl.width()*currentClickLnkSlEq});}});$(window).on('resize',function(){var tabActive=$('.brand-pager a.active');afterExpanded(tabActive);});function swapGalleryImages(){var mainImageBox=$('.js-main-image');mainImageBox.on('click',function(e){e.preventDefault();var parentBox=$(this).closest('.js-ec-gallery'),tnLinks=parentBox.find('.js-thumbnails a'),tnLinksLen=tnLinks.length,$e=$(e.target);if($e.is('img')){var nextImage=$(e.target).next('img'),nextImageIndex=$e.index();if(nextImage.length){$e.hide(0,function(){$e.css('opacity',0);nextImage.css('opacity',1);nextImage.show();});}else{nextImage=$(this).find('img').eq(0);$e.hide(0,function(){$e.css('opacity',0);nextImage.css('opacity',1);nextImage.show();nextImageIndex=-1;});}
tnLinks.removeClass('active');tnLinks.eq(nextImageIndex+ 1).addClass('active');}else if($e.is('a')){var parent=$e.closest('.js-main-image'),activeImage=parent.find('img').filter(':visible'),nextImage=activeImage.next('img'),prevImage=activeImage.prev('img'),nextImageIndex=activeImage.index();if($e.hasClass('ec-control-prev')){if(prevImage.length){activeImage.hide(0,function(){activeImage.css('opacity',0);prevImage.css('opacity',1);prevImage.show();});}else{prevImage=parent.find('img').eq(tnLinksLen- 1);activeImage.hide(0,function(){activeImage.css('opacity',0);prevImage.css('opacity',1);prevImage.show();nextImageIndex=tnLinksLen;});}
tnLinks.removeClass('active');tnLinks.eq(nextImageIndex- 1).addClass('active');}else if($e.hasClass('ec-control-next')){if(nextImage.length){activeImage.hide(0,function(){activeImage.css('opacity',0);nextImage.css('opacity',1);nextImage.show();});}else{nextImage=parent.find('img').eq(0);activeImage.hide(0,function(){activeImage.css('opacity',0);nextImage.css('opacity',1);nextImage.show();nextImageIndex=-1;});}
tnLinks.removeClass('active');tnLinks.eq(nextImageIndex+ 1).addClass('active');}}});}
swapGalleryImages();function swapSlideGalleryImages(){var mainImageBox=$('.js-slide-image');if(!mainImageBox.hasClass('brand-list')){mainImageBox.on('click',function(e){e.preventDefault();var parentBox=$(this).closest('.js-ec-gallery'),tnLinks=parentBox.find('.js-slide-thumbnails a'),tnLinksLen=tnLinks.length,$e=$(e.target);if($e.is('img')){var nextImage=$(e.target).next('img'),nextImageIndex=$e.index();if(nextImage.length){$e.addClass('past-slide').show(0,function(){$e.addClass('past-slide');nextImage.removeClass('past-slide').addClass('active-slide-img');});}else{nextImage=$(this).find('img').eq(0);$e.addClass('past-slide').show(0,function(){$e.addClass('past-slide');nextImage.removeClass('past-slide').addClass('active-slide-img');nextImageIndex=-1;});}
tnLinks.removeClass('active');tnLinks.eq(nextImageIndex+ 1).addClass('active');}});}}
swapSlideGalleryImages();$(window).on('load',function(){checkLocationHash();});$(window).on('resize',function(){var expandedModeObj=$('.js-featured-work-block .expanded-mode');setSizeMode();if(!BFM.isMobile()){reorderExpanded();}});$('body').mouseup(function(e){var $popup=$('.js-featured-work-block .expanded-mode');if(!$popup.is(e.target)&&$popup.has(e.target).length===0&&!$('.fwb-item').is(e.target)&&$('.fwb-item').has(e.target).length===0&&$('.lp-steps li').has(e.target).length===0&&!$('.demo-reel-block').is(e.target)&&$('.demo-reel-block').has(e.target).length===0&&!$('.jq-link-box, .pull-left, .pull-right, .lp-steps li').is(e.target)){$('.fwbi-close').click();}});$('.fwbi-close').on('click',function(e){e.preventDefault();$('.js-fwbi-lnk').removeClass('active-lnk');$('.js-featured-work-block .expanded-mode').slideUp('300',function(){$(this).remove();if(window.history&&window.history.pushState){history.pushState('',document.title,window.location.pathname);}});});$('.js-fwbi-lnk, .js-fwbi-btn').on('click',function(e){e.preventDefault();var clickObj=($(this).hasClass('js-fwbi-btn'))?$('.js-fwbi-item [data-hash-id="'+ $(this).data('hash-id')+'"]'):$(this),hiddenExpandedObj=clickObj.next(),iDValue=hiddenExpandedObj.attr('id'),elemNumber=+iDValue.substr(5),blockPos=iDValue.substr(0,1),blockContainer,blockMode=$('.js-featured-work-block').attr('data-mode'),mode3SecondElem,mode3FirstElem,mode2FirstElem,blockPosition,expandedModeObj=$('.js-featured-work-block .expanded-mode');addHash($(this));$('.js-fwbi-lnk').removeClass('active-lnk');if(blockPos==='f'){blockPosition='f';blockContainer=$('.js-featured-work-block-top');var topBlocksQty=$('.js-featured-work-block-top .fwb-item').length;if(blockMode==='mode-3'){if(topBlocksQty%3===2){mode3SecondElem=true;}
else if(topBlocksQty%3===1){mode3FirstElem=true;}}
else if(blockMode==='mode-2'){if(topBlocksQty%2===1){mode2FirstElem=true;}}
if(expandedModeObj.length>0){expandedModeObj.slideUp('300',function(){$(this).remove();expandedMode(clickObj,blockContainer,elemNumber,hiddenExpandedObj,topBlocksQty,blockMode,mode3SecondElem,mode3FirstElem,mode2FirstElem,blockPosition);});}
else{expandedMode(clickObj,blockContainer,elemNumber,hiddenExpandedObj,topBlocksQty,blockMode,mode3SecondElem,mode3FirstElem,mode2FirstElem,blockPosition);}}
else{blockPosition='s';blockContainer=$('.js-featured-work-block-bottom');var bottomBlocksQty=$('.js-featured-work-block-bottom .fwb-item').length;if(blockMode==='mode-3'){if(bottomBlocksQty%3===2){mode3SecondElem=true;}
else if(bottomBlocksQty%3===1){mode3FirstElem=true;}}
else if(blockMode==='mode-2'){if(bottomBlocksQty%2===1){mode2FirstElem=true;}}
if(expandedModeObj.length>0){expandedModeObj.slideUp('300',function(){$(this).remove();expandedMode(clickObj,blockContainer,elemNumber,hiddenExpandedObj,bottomBlocksQty,blockMode,mode3SecondElem,mode3FirstElem,mode2FirstElem,blockPosition);});}
else{expandedMode(clickObj,blockContainer,elemNumber,hiddenExpandedObj,bottomBlocksQty,blockMode,mode3SecondElem,mode3FirstElem,mode2FirstElem,blockPosition);}}});},expandDemoVideoBlock=function(){var $_PARENT_BOX=$('.js-demo-video-holder'),$_HIDDEN_CONTENT=$_PARENT_BOX.find('.demo-video-box'),$_HIDDEN_CONTENT_CHILD=$_HIDDEN_CONTENT.find('.fwbi-text'),$_OPEN_BTN=$_PARENT_BOX.find('.js-open-video-box'),$_CLOSE_BTN=$_PARENT_BOX.find('.js-fwbi-close'),$_SCROLL_ELMS=$('html ,body'),$_IFRAME=$_HIDDEN_CONTENT_CHILD.find('iframe'),SCROLL_OFFSET=-100,SCROLL_SPEED=400,ANIM_SPEED=400,$_content_holder=$('.drb-main-content'),$_hidden_mobile=$_content_holder.find('.hide-from-mobile'),$_expanded_mode=$('.demo-video-box'),$_mobile_container=$('.mobile-container'),animated=false;function getOffset(obj,offsetMargin){return obj.offset().top+ offsetMargin;}
function checkExpandedModePosition(){if($_hidden_mobile.is(':visible')){if(!$_mobile_container.next('.demo-video-box').length){$_expanded_mode.insertAfter($_mobile_container);}}else{if(!$_content_holder.next('.demo-video-box').length){$_expanded_mode.insertAfter($_content_holder);}}}
checkExpandedModePosition();$(window).on('resize',function(){checkExpandedModePosition();});$_OPEN_BTN.on('click',function(e){e.preventDefault();if(!$(this).hasClass('opened')){if(!animated){$_HIDDEN_CONTENT.show(0,function(){animated=true;var scroll_position=getOffset($_HIDDEN_CONTENT,SCROLL_OFFSET);$_SCROLL_ELMS.animate({scrollTop:scroll_position},SCROLL_SPEED).promise().done(function(){var hidden_content_height=$_HIDDEN_CONTENT_CHILD.innerHeight();$_HIDDEN_CONTENT.animate({height:hidden_content_height},ANIM_SPEED,function(){$_HIDDEN_CONTENT.css('height','auto');$_OPEN_BTN.addClass('opened');animated=false;});});});}}else{var scroll_position=getOffset($_HIDDEN_CONTENT,SCROLL_OFFSET);if(!animated){animated=true;$_SCROLL_ELMS.animate({scrollTop:scroll_position},SCROLL_SPEED,function(){animated=false;});}}});$_CLOSE_BTN.on('click',function(e){e.preventDefault();var _self=$(this);if(!animated){animated=true;$_HIDDEN_CONTENT.animate({height:0},ANIM_SPEED,function(){$_HIDDEN_CONTENT.css('height','');$_OPEN_BTN.removeClass('opened');if($_IFRAME.length){$_IFRAME.attr('src',$_IFRAME.attr('src'));}
animated=false;});}});},eqCaptionText=function(){var elements=$('.occc-column .client-name .c');if(elements.length){var testimonialsBlocks$EQ=new EqualBlocksHeight(elements,{splitBy:3,isResizable:true,isFullLoaded:true,isBoxSized:true});}},expandModeImages=function(){jQuery.fn.toggleText=function(a,b){var isClicked=false;var that=this;this.click(function(){if(isClicked){that.text(a);isClicked=false;}
else{that.text(b);isClicked=true;}});return this;};jQuery(".view-images").click(function(e){e.preventDefault();jQuery(".preview-before").slideToggle("slow");jQuery(".preview-after-frame").slideToggle();jQuery(".preview-after-additional").slideToggle();}).toggleText("View Additional Images","View details");},setFloatPanel=function(){$(function(){var float_panel_offset_top=$('.jq-float-panel').offset().top;$(window).on('resize',function(){float_panel_offset_top=$('.jq-float-panel').offset().top;});var float_panel=function(){var scroll_top=$(window).scrollTop();if(scroll_top>float_panel_offset_top){$('.jq-float-panel').css({'position':'fixed','top':40}).addClass('fix');}else{$('.jq-float-panel').css({'position':'absolute','top':150}).removeClass('fix');}};float_panel();$(window).scroll(function(){float_panel();});$(window).scroll(function(){var footertotop=($('.foot-area').position().top);var scrolltop=$(document).scrollTop()+ 500;var difference=scrolltop- footertotop;difference=difference+ 100;if(scrolltop>footertotop){$('.jq-float-panel').css('margin-top',0- difference);}
else{$('.jq-float-panel').css('margin-top',0);}});$('.jq-go-top').click(function(){$('html, body').animate({scrollTop:0},'slow');return false;});});},setToTopBtn=function(){var SHOW_FROM=200,SCROLL_TO=0,SCROLL_SPEED=400,$_window=$(window),$_scroll_object=$('html, body'),$_btn=$('<div class="btn-top"><span></span><em>Top</em></div>');var btn=$_btn.appendTo($('body'));function checkButtonVisibility(){if(getWindowScrollTop()>SHOW_FROM){if(!btn.hasClass('btn-top-active')){btn.addClass('btn-top-active');}}else{if(btn.hasClass('btn-top-active')){btn.removeClass('btn-top-active');}}}
function getWindowScrollTop(){return(function(){return $_window.scrollTop();})();}
function init(){checkButtonVisibility();btn.on('click',function(e){e.preventDefault();$_scroll_object.animate({scrollTop:SCROLL_TO},SCROLL_SPEED);});}
$_window.on('scroll',function(){checkButtonVisibility();});init();},expandHomePageWorks=function(){var $_linksHolder=$('.olpc-board'),$_links=$_linksHolder.find('a[data-expand-item-index]'),$_expandedMode=$('.home-expanded-mode'),$_top_block=$_linksHolder.find('div[data-expand-position=1]'),$_bottom_block=$_linksHolder.find('div[data-expand-position=2]'),$_close_btn=$_expandedMode.find('.js-fwbi-close'),$_window=$(window),MOBILE_BREAKPOINT=480,is_animated=false,ACTIVE,MODE,POS;var currentWinWidth=getWinWidth();function getWinWidth(){return $_window.width();}
function getLinkIndex(link){return link.data('expand-item-index');}
function checkExpandedModePosition(link){if(currentWinWidth<=MOBILE_BREAKPOINT){MODE='m';}else{var link_index=getLinkIndex(link);if(link_index<=3){POS='t';}else{POS='b';}
MODE='d';}}
function checkExpandedInPosition(position,expanded){if(!(position.next('.home-expanded-mode').length)){return true;}else{return false;}}
function appendExpandedToPosition(expanded,position){expanded.insertAfter(position);}
function setScrollTo(scrollPosition,cb,link){var element=$('html ,body'),scrollSpeed=400;is_animated=true;element.animate({scrollTop:scrollPosition},scrollSpeed).promise().done(function(){if(typeof cb==="function"){cb(link);}
is_animated=false;});}
function getOffset(obj,offsetMargin){return obj.offset().top+ offsetMargin;}
function getMobileAppendIndex(link){var linkIndex=getLinkIndex(link),appendIndex;switch(linkIndex){case 1:appendIndex=$_linksHolder.find('div[data-expand-position=1] .olpcb-left-column');break;case 2:case 3:appendIndex=$_linksHolder.find('div[data-expand-position=1] .olpcb-right-column');break;case 4:case 5:appendIndex=$_linksHolder.find('div[data-expand-position=2] .olpcb-left-column');break;case 6:appendIndex=$_linksHolder.find('div[data-expand-position=2] .olpcb-right-column');break;}
return appendIndex;}
function checkIframe(object){var Iframe=object.find('iframe'),IframeId;if(Iframe.length){IframeId=Iframe.attr('id');}
return IframeId;}
function reloadIframeContent(object){var Iframe=object.find('iframe');if(Iframe.length){var src=Iframe.attr('src');Iframe.attr('src','');Iframe.attr('src',src);}}
function openWindow(link){var linkIndex=getLinkIndex(link),$_expandedItem=$('#c-em-'+ linkIndex);is_animated=true;ACTIVE=linkIndex;$_links.filter('[data-expand-item-index='+ ACTIVE+']').addClass('active');$_expandedItem.css({'height':0,'overflow':'hidden'}).show(0,function(){var innerBoxHeight=$(this).find('.ec-frame').height();$(this).animate({height:innerBoxHeight},300,function(){$(this).css({'height':'','overflow':''});is_animated=false;});});}
function closeWindow(linkIndex,scopeMode,setScrollTo,openWindow,link){var
$_expandedItem=$('#c-em-'+ linkIndex),is_animated=true,offset;$_expandedItem.css({'overflow':'hidden'}).animate({'height':0},300,function(){$(this).css({'height':'','overflow':'','display':'none'});if(typeof checkIframe($_expandedItem)!=='undefined'&&checkIframe($_expandedItem)!==''){if(!BFM.isMobile()){if(players[checkIframe($_expandedItem)]instanceof Object){stopYouTubeVideo(checkIframe($_expandedItem));}}else{reloadIframeContent($_expandedItem);}}
$_links.filter('[data-expand-item-index='+ ACTIVE+']').removeClass('active');if(typeof scopeMode!=='undefined'){switch(scopeMode){case'in-scope':if(typeof setScrollTo==='function'){offset=getOffset($_expandedMode,-68);setScrollTo(offset,openWindow,link);}
break;case'not-in-scope':if(POS==='t'){if(checkExpandedInPosition($_top_block,$_expandedMode)){appendExpandedToPosition($_expandedMode,$_top_block);}}else if(POS==='b'){if(checkExpandedInPosition($_bottom_block,$_expandedMode)){appendExpandedToPosition($_expandedMode,$_bottom_block);}}
if(typeof setScrollTo==='function'){offset=getOffset($_expandedMode,-68);setScrollTo(offset,openWindow,link);}
break;case'mobile-scope':var mobileAppendedItem=getMobileAppendIndex(link);if(checkExpandedInPosition(mobileAppendedItem,$_expandedMode)){appendExpandedToPosition($_expandedMode,mobileAppendedItem);}
if(typeof setScrollTo==='function'){offset=getOffset($_expandedMode,-68);setScrollTo(offset,openWindow,link);}
break;}}
ACTIVE=undefined;is_animated=false;});}
$_links.on('click',function(e){e.preventDefault();var $this=$(this),offset;il.render($('#c-em-'+ $this.data('expand-item-index')));if(is_animated){return;}
is_animated=true;checkExpandedModePosition($this);if(typeof ACTIVE!=='undefined'){if(MODE==='d'){if($this.hasClass('active')){offset=getOffset($_expandedMode,-68);setScrollTo(offset);}else{var linkParent=$this.closest('div[data-expand-position]');if(!checkExpandedInPosition(linkParent,$_expandedMode)){closeWindow(ACTIVE,'in-scope',setScrollTo,openWindow,$this);}else{closeWindow(ACTIVE,'not-in-scope',setScrollTo,openWindow,$this);}}}else{if($this.hasClass('active')){offset=getOffset($_expandedMode,-68);setScrollTo(offset);}else{closeWindow(ACTIVE,'mobile-scope',setScrollTo,openWindow,$this);}}}else{if(MODE==='d'){if(POS==='t'){if(checkExpandedInPosition($_top_block,$_expandedMode)){appendExpandedToPosition($_expandedMode,$_top_block);}}else if(POS==='b'){if(checkExpandedInPosition($_bottom_block,$_expandedMode)){appendExpandedToPosition($_expandedMode,$_bottom_block);}}
offset=getOffset($_expandedMode,-68);setScrollTo(offset,openWindow,$this);}else{var mobileAppendedItem=getMobileAppendIndex($this);if(checkExpandedInPosition(mobileAppendedItem,$_expandedMode)){appendExpandedToPosition($_expandedMode,mobileAppendedItem);}
offset=getOffset($_expandedMode,-68);setScrollTo(offset,openWindow,$this);}}});$_close_btn.on('click',function(e){e.preventDefault();closeWindow(ACTIVE);});$_window.on('resize',function(){if(typeof ACTIVE!=='undefined'){var $winW=$(this).width();if($winW!==currentWinWidth){currentWinWidth=$winW;var activeLink=$_links.filter('[data-expand-item-index='+ ACTIVE+']').eq(0);checkExpandedModePosition(activeLink);if(MODE==='d'){if(POS==='t'){if(checkExpandedInPosition($_top_block,$_expandedMode)){appendExpandedToPosition($_expandedMode,$_top_block);}}else if(POS==='b'){if(checkExpandedInPosition($_bottom_block,$_expandedMode)){appendExpandedToPosition($_expandedMode,$_bottom_block);}}}else{var mobileAppendedItem=getMobileAppendIndex(activeLink);if(checkExpandedInPosition(mobileAppendedItem,$_expandedMode)){appendExpandedToPosition($_expandedMode,mobileAppendedItem);}}}}});$('.js-ec-gallery .js-thumbnails a').on('click',function(e){e.preventDefault();var _self=$(this),currentClickLnkEq=_self.index(),parentNode=_self.parents('.js-ec-gallery');$('.js-thumbnails a',parentNode).removeClass('active');$('.js-main-image img',parentNode).removeAttr('style');_self.addClass('active');$('.js-main-image img',parentNode).eq(currentClickLnkEq).show().animate({opacity:1},600);});};return{init:init,isMobile:isMobile,setPlaceholders:setPlaceholders,setBxSlider:setBxSlider,setScrollLinks:setScrollLinks,expandBeforeAfterBlock:expandBeforeAfterBlock,setEZCheckboxes:setEZCheckboxes,setFloatPanel:setFloatPanel,expandTestimonialsBlock:expandTestimonialsBlock,expandVideosBlock:expandVideosBlock,expandTestimonials:expandTestimonials,eqCaptionText:eqCaptionText,expandModeImages:expandModeImages,expandPortfolioBlocks:expandPortfolioBlocks,expandFeatBlocks:expandFeatBlocks,expandDemoVideoBlock:expandDemoVideoBlock,setToTopBtn:setToTopBtn,expandHomePageWorks:expandHomePageWorks};};var BFMMobilejs=function(){"use strict";var
initOurLatestProjects=function(){var olpEcommerce=$('.olp-ecommerce'),olpiHoverStare=$('.olpi-hover-stare',olpEcommerce);if(olpEcommerce.length){olpEcommerce.on('click',function(){var _self=$(this);if(!_self.hasClass('activated')){olpiHoverStare.show();_self.addClass('activated');}
else{olpiHoverStare.hide();_self.removeClass('activated');}});}},initWhatWeDoIn=function(){var
bubble_click_elem=$('.sc-bubble > a'),bubble_ul_list=$('.sc-bubble ul'),bubble_container=$('.sc-bubble');if(bubble_click_elem.length){bubble_click_elem.on('click',function(e){e.preventDefault();var _self=$(this);var parentSelf=_self.parent();if(!_self.parent().hasClass('activated')){bubble_ul_list.hide();bubble_container.removeClass('activated');_self.next().show();parentSelf.addClass('activated');}
else{bubble_ul_list.hide();bubble_container.removeClass('activated');}});}};return{initOurLatestProjects:initOurLatestProjects,initWhatWeDoIn:initWhatWeDoIn};};var BFM=new BFMjs();var BFMMobile=new BFMMobilejs();BFM.init();function processSlider(sliderParent){var sliderObject=sliderParent.find('.js-psc-slider'),sliderNav=sliderParent.find('.js-ps-nav'),sliderNavLinks=$('a',sliderNav),btnNext=sliderParent.find('.js-btn-simple'),slider;function setCurrentSlide(index){sliderNavLinks.removeClass('active');sliderNav.find('.psn-item').removeClass('psn-item-active');sliderNavLinks.eq(index).addClass('active');sliderNavLinks.eq(index).closest('.psn-item').addClass('psn-item-active');sliderNav.removeClass('current-active-0 current-active-1 current-active-2 current-active-3 current-active-4');sliderNav.addClass('current-active-'+ index);}
function initSliderNav(slider){sliderNavLinks.on('click',function(e){e.preventDefault();var slideIndex=$(this).data('slide')- 1;if(!$(this).hasClass('active')){sliderNavLinks.removeClass('active');setCurrentSlide(slideIndex);slider.goToSlide(slideIndex);}});btnNext.on('click',function(e){e.preventDefault();slider.goToNextSlide();});}
function init(){var sliderQty=sliderNavLinks.length;slider=sliderObject.bxSlider({mode:'fade',infiniteLoop:false,adaptiveHeight:true,pager:false,controls:true,hideControlOnEnd:true,onSliderLoad:function(currentIndex){setCurrentSlide(currentIndex);},onSlideBefore:function($slideElement,oldIndex,newIndex){setCurrentSlide(newIndex);if(newIndex>=sliderQty- 1){btnNext.hide();}else{btnNext.show();}}});initSliderNav(slider);}
init();}